---

- name: Admin Certificate 
  import_tasks: ./admin-cert.yml
  when: "'localhost' in group_names"
  tags:
  - generate_the_admin_cert
  
- name: Controller Manager
  import_tasks: ./controller_manager_client_cert.yml
  when: "'localhost' in group_names"
  tags:
  - generate_the_controller_manager_cert

- name: Kubernetes | Control Plane | Download control plane components
  become: yes
  script: ./scripts/download_kubernetes_control_plane {{ kubernetes_version }}
  args:
    creates: /tmp/.download_kubernetes_control_plane
  when: "'masters' in group_names"
  tags:
  - download_kubernetes_control_plane
